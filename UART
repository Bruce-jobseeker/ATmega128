#define F_CPU 16000000L
#define TERMINATOR '\r'

#include <avr/io.h>
#include <util/delay.h>
#include <stdio.h>
#include "UART1.h"

int main(void)
{
    /* Replace with your application code */
	
	char buffer[20] = "";
	int index = 0;
	int process_data = 0;
	char data;
	UART1_init();
	
	
    while (1) 
    {
		data = UART1_receive();
		
		if( data == TERMINATOR ){
			buffer[index] = '\0';
			process_data = 1;
		}
		else{
			if(65 <= data && 90 >= data){
				data+=32;
			}
			else if(97 <= data && 122 >= data){
				data-=32;
			}
			buffer[index] = data;
			index++;
		}
		if(process_data == 1){
		UART1_print_string(buffer);
		UART1_print_string("\r\n");
		
		index=0;
		process_data=0;
		}
    }
	return 0;
}
