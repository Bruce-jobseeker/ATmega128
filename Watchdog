#define F_CPU 16000000L

#include <avr/io.h>
#include <avr/wdt.h>
#include <stdio.h>
#include <util/delay.h>
#include "UART1.h"

FILE OUTPUT = FDEV_SETUP_STREAM(UART1_transmit, NULL, _FDEV_SETUP_WRITE);
FILE INPUT = FDEV_SETUP_STREAM(NULL, UART1_receive, _FDEV_SETUP_READ);

int main(void)
{
    /* Replace with your application code */
	
	UART1_init();
	
	DDRB = 0x00;
	
	stdout=&OUTPUT;
	stdin=&INPUT;
	
	int count=0;
	
	printf("*** Initialization...\r\n");
	
    while (1) 
    {	
		count++;
		printf("Count : %d\r\n", count);
		_delay_ms(1000);
		
		if(PINB & 0x01){
			wdt_enable(WDTO_15MS);
			while(1);
		}
    }
}
